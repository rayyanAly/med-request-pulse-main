{
	"info": {
		"_postman_id": "api-panel-v2",
		"name": "800 Pharmacy API - Panel V2",
		"description": "API documentation for 800 Pharmacy Partner Panel V2",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{
			"key": "baseUrl",
			"value": "https://800pharmacy.ae/api_panel/v2",
			"type": "string"
		},
		{
			"key": "partnerId",
			"value": "310ab792-bcba-11ed-815d-020017006c44",
			"type": "string"
		},
		{
			"key": "refId",
			"value": "430",
			"type": "string"
		},
		{
			"key": "sessionToken",
			"value": "",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Partner Login",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-Partner-Id",
								"value": "{{partnerId}}",
								"type": "text"
							},
							{
								"key": "X-Ref-Id",
								"value": "{{refId}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{"key": "user_name", "value": "your_username", "type": "text", "description": "Partner username"},
								{"key": "password", "value": "your_password", "type": "text", "description": "Partner password"}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/?c=partners&m=login",
							"host": ["{{baseUrl}}"],
							"query": [
								{"key": "c", "value": "partners", "description": "Controller"},
								{"key": "m", "value": "login", "description": "Method"}
							]
						},
						"description": "Partner login to get session token.\n\n**Headers:**\n- `X-Partner-Id`: Your partner ID\n- `X-Ref-Id`: Your partner reference ID\n\n**Returns:**\n- `partner_session`: Session token for subsequent requests\n- `partner_id`: Your partner ID\n- `partner_ref_id`: Your partner reference ID"
					},
					"response": [
						{
							"name": "Success",
							"body": {
								"mode": "raw",
								"raw": "{\n    \"success\": true,\n    \"data\": {\n        \"partner_session\": \"abc123xyz_session_token\",\n        \"partner_id\": \"310ab792-bcba-11ed-815d-020017006c44\",\n        \"partner_ref_id\": \"430\"\n    }\n}"
							}
						},
						{
							"name": "Error - Invalid Credentials",
							"body": {
								"mode": "raw",
								"raw": "{\n    \"success\": false,\n    \"error\": \"Invalid username or password\"\n}"
							}
						}
					]
				},
				{
					"name": "Logout",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-Partner-Id",
								"value": "{{partnerId}}",
								"type": "text"
							},
							{
								"key": "X-Ref-Id",
								"value": "{{refId}}",
								"type": "text"
							},
							{
								"key": "X-Session",
								"value": "{{sessionToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/?c=customers&m=logout",
							"host": ["{{baseUrl}}"],
							"query": [
								{"key": "c", "value": "customers", "description": "Controller"},
								{"key": "m", "value": "logout", "description": "Method"}
							]
						},
						"description": "Logout and invalidate session."
					},
					"response": [
						{
							"name": "Success",
							"body": {
								"mode": "raw",
								"raw": "{\n    \"success\": true,\n    \"message\": \"Logged out successfully\"\n}"
							}
						}
					]
				}
			]
		},
		{
			"name": "Orders",
			"item": [
				{
					"name": "List Orders",
					"request": {
						"method": "GET",
						"header": [
							{"key": "X-Partner-Id", "value": "{{partnerId}}", "type": "text"},
							{"key": "X-Ref-Id", "value": "{{refId}}", "type": "text"},
							{"key": "X-Session", "value": "{{sessionToken}}", "type": "text"}
						],
						"url": {
							"raw": "{{baseUrl}}/orders?limit=10&page=1",
							"host": ["{{baseUrl}}"],
							"path": ["orders"],
							"query": [
								{"key": "limit", "value": "10", "description": "Number of records", "disabled": true},
								{"key": "page", "value": "1", "description": "Page number", "disabled": true},
								{"key": "sort", "value": "", "description": "Sort by field", "disabled": true},
								{"key": "orderby", "value": "", "description": "Sort order", "disabled": true},
								{"key": "customer", "value": "", "description": "Filter by customer", "disabled": true}
							]
						},
						"description": "Get a list of orders with optional filtering"
					},
					"response": [
						{
							"name": "Success",
							"body": {
								"mode": "raw",
								"raw": "{\n    \"data\": [\n        {\n            \"order_id\": \"ORD123\",\n            \"firstname\": \"John\",\n            \"lastname\": \"Doe\",\n            \"payment_method\": \"Cash On Delivery\",\n            \"total\": 150.00,\n            \"order_status\": \"Pending\",\n            \"date_added\": \"13/02/2026 10:30:00\"\n        }\n    ]\n}"
							}
						}
					]
				},
				{
					"name": "Get Single Order",
					"request": {
						"method": "GET",
						"header": [
							{"key": "X-Partner-Id", "value": "{{partnerId}}", "type": "text"},
							{"key": "X-Ref-Id", "value": "{{refId}}", "type": "text"},
							{"key": "X-Session", "value": "{{sessionToken}}", "type": "text"}
						],
						"url": {
							"raw": "{{baseUrl}}/orders?id=ORDER_ID",
							"host": ["{{baseUrl}}"],
							"path": ["orders"],
							"query": [{"key": "id", "value": "ORDER_ID", "description": "Order ID"}]
						},
						"description": "Get details of a specific order"
					},
					"response": [
						{
							"name": "Success",
							"body": {
								"mode": "raw",
								"raw": "{\n    \"data\": {\n        \"order_id\": \"ORD123\",\n        \"order_id_internal\": 456,\n        \"firstname\": \"John\",\n        \"lastname\": \"Doe\",\n        \"email\": \"john@example.com\",\n        \"telephone\": \"+971500000000\",\n        \"payment_method\": \"Cash On Delivery\",\n        \"total\": 150.00,\n        \"order_status\": \"Pending\",\n        \"products\": [\n            {\n                \"product_id\": 1,\n                \"name\": \"Paracetamol\",\n                \"quantity\": 2,\n                \"price\": 25.00,\n                \"total\": 50.00\n            }\n        ]\n    }\n}"
							}
						}
					]
				},
				{
					"name": "Upload Temp Prescription",
					"request": {
						"method": "POST",
						"header": [
							{"key": "X-Partner-Id", "value": "{{partnerId}}", "type": "text"},
							{"key": "X-Ref-Id", "value": "{{refId}}", "type": "text"},
							{"key": "X-Session", "value": "{{sessionToken}}", "type": "text"}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{"key": "prescription", "type": "file", "description": "Prescription image file (jpg, png, pdf)"},
								{"key": "session", "value": "1739527200000", "type": "text", "description": "Unique session ID (timestamp) to group multiple files"}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/?c=orders&m=upload_temp",
							"host": ["{{baseUrl}}"],
							"query": [
								{"key": "c", "value": "orders", "description": "Controller"},
								{"key": "m", "value": "upload_temp", "description": "Method"}
							]
						},
						"description": "Upload prescription image temporarily before creating order. Call this for each file, then pass the session ID when creating the order.\n\n**Session ID**: Use a timestamp like `Date.now()` - e.g., `1739527200000`. Use the same session ID for all files in one order.\n\n**Response contains `inserted_id`** - save this for deleting files if needed."
					},
					"response": [
						{
							"name": "Success",
							"body": {
								"mode": "raw",
								"raw": "{\n    \"success\": true,\n    \"message\": \"File uploaded successfully\",\n    \"data\": {\n        \"inserted_id\": \"123\",\n        \"session\": \"1739527200000\",\n        \"filename\": \"prescription_123.jpg\"\n    }\n}"
							}
						},
						{
							"name": "Error",
							"body": {
								"mode": "raw",
								"raw": "{\n    \"success\": false,\n    \"error\": \"Invalid file type\"\n}"
							}
						}
					]
				},
				{
					"name": "Delete Temp File",
					"request": {
						"method": "GET",
						"header": [
							{"key": "X-Partner-Id", "value": "{{partnerId}}", "type": "text"},
							{"key": "X-Ref-Id", "value": "{{refId}}", "type": "text"},
							{"key": "X-Session", "value": "{{sessionToken}}", "type": "text"}
						],
						"url": {
							"raw": "{{baseUrl}}/?c=orders&m=delete_temp&id=INSERTED_ID&session=SESSION_ID",
							"host": ["{{baseUrl}}"],
							"query": [
								{"key": "c", "value": "orders", "description": "Controller"},
								{"key": "m", "value": "delete_temp", "description": "Method"},
								{"key": "id", "value": "INSERTED_ID", "description": "The inserted_id from upload_temp response"},
								{"key": "session", "value": "SESSION_ID", "description": "The session ID used during upload"}
							]
						},
						"description": "Delete a temporarily uploaded file.\n\n**Parameters:**\n- `id`: The `inserted_id` from the upload_temp response\n- `session`: The session ID used during upload"
					},
					"response": [
						{
							"name": "Success",
							"body": {
								"mode": "raw",
								"raw": "{\n    \"success\": true,\n    \"message\": \"File deleted successfully\"\n}"
							}
						},
						{
							"name": "Error",
							"body": {
								"mode": "raw",
								"raw": "{\n    \"success\": false,\n    \"error\": \"File not found\"\n}"
							}
						}
					]
				},
				{
					"name": "Create Order",
					"request": {
						"method": "POST",
						"header": [
							{"key": "X-Partner-Id", "value": "{{partnerId}}", "type": "text"},
							{"key": "X-Ref-Id", "value": "{{refId}}", "type": "text"},
							{"key": "X-Session", "value": "{{sessionToken}}", "type": "text"}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{"key": "first_name", "value": "Rayyan", "type": "text", "description": "Customer first name (required if no customer_id)"},
								{"key": "last_name", "value": "Ansari", "type": "text", "description": "Customer last name (required if no customer_id)"},
								{"key": "contact_number", "value": "+971502056544", "type": "text", "description": "Phone number, min 9 chars"},
								{"key": "building", "value": "Alqouz", "type": "text", "description": "Building number (required if no address_id)"},
								{"key": "unit", "value": "800", "type": "text", "description": "Unit/apartment (required if no address_id)"},
								{"key": "payment_method", "value": "cash", "type": "text", "description": "cash, card, online, pal, paid_already"},
								{"key": "with_insurance", "value": "0", "type": "text", "description": "0 or 1"},
								{"key": "with_prescription", "value": "0", "type": "text", "description": "0 or 1"},
								{"key": "products", "value": "[{\"sku\":\"12345\",\"qty\":1}]", "type": "text", "description": "JSON array with sku and qty fields (NOT product_id/quantity)"},
								{"key": "session", "value": "1739527200000", "type": "text", "description": "Session ID from upload_temp (links pre-uploaded prescription files)", "disabled": true},
								{"key": "erx", "value": "ERX123456", "type": "text", "description": "ERX number (if prescription exists in system)", "disabled": true},
								{"key": "eid_no", "value": "784-1234-5678901-2", "type": "text", "description": "Emirates ID number", "disabled": true},
								{"key": "notes", "value": "Delivery instructions", "type": "text", "description": "Order notes/comments", "disabled": true},
								{"key": "insurance", "type": "file", "description": "Insurance card image (if with_insurance=1)", "disabled": true},
								{"key": "emirates_id", "type": "file", "description": "Emirates ID image (for new customers)", "disabled": true}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/orders/create",
							"host": ["{{baseUrl}}"],
							"path": ["orders", "create"]
						},
						"description": "Create a new order with products and optional file attachments.\n\n**Important Notes:**\n- Products MUST use `sku` and `qty` fields (NOT `product_id` and `quantity`)\n- For prescriptions: Pre-upload via `upload_temp` API and pass `session` ID\n- Files: `insurance` and `emirates_id` can be uploaded directly\n- Don't set Content-Type header - let browser set it for FormData"
					},
					"response": [
						{
							"name": "Success",
							"body": {
								"mode": "raw",
								"raw": "{\n    \"data\": {\n        \"order_id\": \"ORD123\",\n        \"customer_id\": \"CUST456\",\n        \"address_id\": \"ADDR789\",\n        \"cancel_key\": \"abc123xyz\"\n    }\n}"
							}
						}
					]
				},
				{
					"name": "Order Status",
					"request": {
						"method": "GET",
						"header": [
							{"key": "X-Partner-Id", "value": "{{partnerId}}", "type": "text"},
							{"key": "X-Ref-Id", "value": "{{refId}}", "type": "text"},
							{"key": "X-Session", "value": "{{sessionToken}}", "type": "text"}
						],
						"url": {
							"raw": "{{baseUrl}}/orders/status?id=ORDER_ID",
							"host": ["{{baseUrl}}"],
							"path": ["orders", "status"],
							"query": [{"key": "id", "value": "ORDER_ID", "description": "Order ID"}]
						},
						"description": "Get the status of an order"
					},
					"response": [
						{
							"name": "Success",
							"body": {
								"mode": "raw",
								"raw": "{\n    \"data\": {\n        \"order_id\": \"ORD123\",\n        \"status\": \"Delivered\",\n        \"last_update\": \"13/02/2026 15:30:00\"\n    }\n}"
							}
						}
					]
				},
				{
					"name": "Cancel Order",
					"request": {
						"method": "POST",
						"header": [
							{"key": "X-Partner-Id", "value": "{{partnerId}}", "type": "text"},
							{"key": "X-Ref-Id", "value": "{{refId}}", "type": "text"},
							{"key": "X-Session", "value": "{{sessionToken}}", "type": "text"}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{"key": "id", "value": "ORDER_ID", "type": "text"},
								{"key": "cancel_key", "value": "CANCEL_KEY", "type": "text"}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/orders/cancel",
							"host": ["{{baseUrl}}"],
							"path": ["orders", "cancel"]
						},
						"description": "Cancel an order"
					},
					"response": [
						{
							"name": "Success",
							"body": {
								"mode": "raw",
								"raw": "{\n    \"data\": {\n        \"order_id\": \"ORD123\",\n        \"status\": \"Cancelled\"\n    }\n}"
							}
						}
					]
				},
				{
					"name": "Track Order",
					"request": {
						"method": "GET",
						"header": [
							{"key": "X-Partner-Id", "value": "{{partnerId}}", "type": "text"},
							{"key": "X-Ref-Id", "value": "{{refId}}", "type": "text"},
							{"key": "X-Session", "value": "{{sessionToken}}", "type": "text"}
						],
						"url": {
							"raw": "{{baseUrl}}/orders/track?id=ORDER_ID",
							"host": ["{{baseUrl}}"],
							"path": ["orders", "track"],
							"query": [{"key": "id", "value": "ORDER_ID", "description": "Order ID"}]
						},
						"description": "Track an order (driver info, location)"
					},
					"response": [
						{
							"name": "Success",
							"body": {
								"mode": "raw",
								"raw": "{\n    \"data\": {\n        \"order_id\": \"ORD123\",\n        \"status\": \"Out for Delivery\",\n        \"driver_name\": \"Ahmed\",\n        \"driver_phone\": \"+971500000000\"\n    }\n}"
							}
						}
					]
				}
			]
		},
		{
			"name": "Customers",
			"item": [
				{
					"name": "List Customers",
					"request": {
						"method": "GET",
						"header": [
							{"key": "X-Partner-Id", "value": "{{partnerId}}", "type": "text"},
							{"key": "X-Ref-Id", "value": "{{refId}}", "type": "text"},
							{"key": "X-Session", "value": "{{sessionToken}}", "type": "text"}
						],
						"url": {
							"raw": "{{baseUrl}}/customers?limit=10&page=1",
							"host": ["{{baseUrl}}"],
							"path": ["customers"],
							"query": [
								{"key": "limit", "value": "10", "disabled": true},
								{"key": "page", "value": "1", "disabled": true}
							]
						},
						"description": "Get a list of customers"
					},
					"response": [
						{
							"name": "Success",
							"body": {
								"mode": "raw",
								"raw": "{\n    \"data\": [\n        {\n            \"customer_id\": \"CUST123\",\n            \"first_name\": \"John\",\n            \"last_name\": \"Doe\",\n            \"email\": \"john@example.com\",\n            \"phone\": \"+971500000000\",\n            \"total_orders\": 5\n        }\n    ]\n}"
							}
						}
					]
				},
				{
					"name": "Register Customer",
					"request": {
						"method": "POST",
						"header": [
							{"key": "X-Partner-Id", "value": "{{partnerId}}", "type": "text"},
							{"key": "X-Ref-Id", "value": "{{refId}}", "type": "text"},
							{"key": "X-Session", "value": "{{sessionToken}}", "type": "text"}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{"key": "first_name", "value": "John", "type": "text", "description": "First name"},
								{"key": "last_name", "value": "Doe", "type": "text", "description": "Last name"},
								{"key": "password", "value": "password123", "type": "text", "description": "Password (min 6 chars)"},
								{"key": "confirm_password", "value": "password123", "type": "text", "description": "Confirm password"},
								{"key": "contact_number", "value": "+971500000000", "type": "text", "description": "Phone number"},
								{"key": "email", "value": "john@example.com", "type": "text", "description": "Email (optional)", "disabled": true}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/customers/register",
							"host": ["{{baseUrl}}"],
							"path": ["customers", "register"]
						},
						"description": "Register a new customer"
					},
					"response": [
						{
							"name": "Success",
							"body": {
								"mode": "raw",
								"raw": "{\n    \"data\": {\n        \"customer_id\": \"CUST123\"\n    }\n}"
							}
						}
					]
				},
				{
					"name": "Customer Login",
					"request": {
						"method": "POST",
						"header": [
							{"key": "X-Partner-Id", "value": "{{partnerId}}", "type": "text"},
							{"key": "X-Ref-Id", "value": "{{refId}}", "type": "text"},
							{"key": "X-Session", "value": "{{sessionToken}}", "type": "text"}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{"key": "username", "value": "john@example.com", "type": "text", "description": "Username or email"},
								{"key": "password", "value": "password123", "type": "text", "description": "Password"}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/customers/login",
							"host": ["{{baseUrl}}"],
							"path": ["customers", "login"]
						},
						"description": "Customer login"
					},
					"response": [
						{
							"name": "Success",
							"body": {
								"mode": "raw",
								"raw": "{\n    \"data\": {\n        \"customer_id\": 123,\n        \"external_id\": \"CUST123\",\n        \"firstname\": \"John\",\n        \"lastname\": \"Doe\",\n        \"email\": \"john@example.com\"\n    }\n}"
							}
						}
					]
				}
			]
		},
		{
			"name": "Products",
			"item": [
				{
					"name": "List Products",
					"request": {
						"method": "GET",
						"header": [
							{"key": "X-Partner-Id", "value": "{{partnerId}}", "type": "text"},
							{"key": "X-Ref-Id", "value": "{{refId}}", "type": "text"},
							{"key": "X-Session", "value": "{{sessionToken}}", "type": "text"}
						],
						"url": {
							"raw": "{{baseUrl}}/products?limit=10&page=1",
							"host": ["{{baseUrl}}"],
							"path": ["products"],
							"query": [
								{"key": "category", "value": "1", "description": "Category ID", "disabled": true},
								{"key": "limit", "value": "10", "disabled": true},
								{"key": "page", "value": "1", "disabled": true}
							]
						},
						"description": "Get a list of products"
					},
					"response": [
						{
							"name": "Success",
							"body": {
								"mode": "raw",
								"raw": "{\n    \"data\": [\n        {\n            \"product_id\": 1,\n            \"sku\": 12345,\n            \"name\": \"Paracetamol 500mg\",\n            \"price\": 25.00,\n            \"category_name\": \"Pain Relief\"\n        }\n    ]\n}"
							}
						}
					]
				},
				{
					"name": "Check Stock",
					"request": {
						"method": "GET",
						"header": [
							{"key": "X-Partner-Id", "value": "{{partnerId}}", "type": "text"},
							{"key": "X-Ref-Id", "value": "{{refId}}", "type": "text"},
							{"key": "X-Session", "value": "{{sessionToken}}", "type": "text"}
						],
						"url": {
							"raw": "{{baseUrl}}/products/showstock?sku=12345",
							"host": ["{{baseUrl}}"],
							"path": ["products", "showstock"],
							"query": [{"key": "sku", "value": "12345", "description": "Product SKU"}]
						},
						"description": "Check stock availability for a product"
					},
					"response": [
						{
							"name": "Success",
							"body": {
								"mode": "raw",
								"raw": "{\n    \"data\": {\n        \"name\": \"Paracetamol 500mg\",\n        \"stock_available\": true\n    }\n}"
							}
						}
					]
				}
			]
		},
		{
			"name": "Stats",
			"item": [
				{
					"name": "Dashboard Stats",
					"request": {
						"method": "GET",
						"header": [
							{"key": "X-Partner-Id", "value": "{{partnerId}}", "type": "text"},
							{"key": "X-Ref-Id", "value": "{{refId}}", "type": "text"},
							{"key": "X-Session", "value": "{{sessionToken}}", "type": "text"}
						],
                        "url": {
							"raw": "{{baseUrl}}/stats",
							"host": ["{{baseUrl}}"],
							"path": ["stats"]
						},
						"description": "Get dashboard statistics"
					},
					"response": [
						{
							"name": "Success",
							"body": {
								"mode": "raw",
								"raw": "{\n    \"data\": {\n        \"total_sale\": 15000.50,\n        \"total_orders\": 150,\n        \"total_customers\": 75,\n        \"average_value\": 100.00\n    }\n}"
							}
						}
					]
				}
			]
		},
		{
			"name": "Categories",
			"item": [
				{
					"name": "List Categories",
					"request": {
						"method": "GET",
						"header": [
							{"key": "X-Partner-Id", "value": "{{partnerId}}", "type": "text"},
							{"key": "X-Ref-Id", "value": "{{refId}}", "type": "text"},
							{"key": "X-Session", "value": "{{sessionToken}}", "type": "text"}
						],
						"url": {
							"raw": "{{baseUrl}}/categories",
							"host": ["{{baseUrl}}"],
							"path": ["categories"]
						},
						"description": "Get a list of product categories"
					},
					"response": [
						{
							"name": "Success",
							"body": {
								"mode": "raw",
								"raw": "{\n    \"data\": [\n        {\n            \"category_id\": 1,\n            \"name\": \"Pain Relief\"\n        }\n    ]\n}"
							}
						}
					]
				}
			]
		}
	]
}
